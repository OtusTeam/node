.center.icon[![otus main](assets/otus-1.png)]

---

background-image: url(assets/title.svg)

# –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ Node.js
## –í–≤–µ–¥–µ–Ω–∏–µ –≤ Node.js –∏ NPM
### –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ö–æ—Ä–∂–∏–∫–æ–≤

---

class: top white
background-image: url(assets/sound.svg)
.top.icon[![otus main](assets/otus-2.png)]

.sound-top[
  # –ö–∞–∫ –º–µ–Ω—è —Å–ª—ã—à–Ω–æ –∏ –≤–∏–¥–Ω–æ?
]

.sound-bottom[
  ## > –ù–∞–ø–∏—à–∏—Ç–µ –≤ —á–∞—Ç
  ### **+** –µ—Å–ª–∏ –≤—Å–µ —Ö–æ—Ä–æ—à–æ
  ### **‚Äì** –µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã c–æ –∑–≤—É–∫–æ–º –∏–ª–∏ —Å –≤–∏–¥–µ–æ
]

---

# –¶–µ–ª–∏ –∑–∞–Ω—è—Ç–∏—è

- –ü–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º–∏ –∏ –ø—Ä–æ–≥—Ä–∞–º–º–æ–π –∫—É—Ä—Å–∞, –ø–æ–Ω–∏–º–∞—Ç—å –∫–∞–∫ –æ–Ω–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞
- –ó–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ `Node`
- –†–∞–±–æ—Ç–∞—Ç—å —Å –ø–∞–∫–µ—Ç–Ω—ã–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º `NPM`
- –£–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á–∏ —Å –ø–æ–º–æ—â—å—é `package.json`

---

# –í–æ–ø—Ä–æ—Å

- –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ üòÄ , –º–æ–∂–Ω–æ –≤ [—Å–ª–∞–∫–µ](https://join.slack.com/t/otus-js/shared_invite/enQtMjc5ODE0NDA0ODE3LTA4NTJjYzNlOWI5ZDNmMGNkZjRmNGNiNzM2NjhlMzc2MjYxY2IzZDVlMjY0YjJhZTNlZjRiNTcwNmRjYzZjYzk
)

  - –ö—Ç–æ –í—ã?
  - –ö–∞–∫–æ–π –í–∞—à –æ–ø—ã—Ç –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏?
  - –ö–∞–∫–∏–µ `Node.js` —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –í—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ? 
  - –ß—Ç–æ –í—ã –∂–¥–µ—Ç–µ –æ—Ç –∫—É—Ä—Å–∞?
  
.green[
## –î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Zoom –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ
]
.red[
## **All panelists and attendees**
## **–í–µ–¥—É—â–∏–µ –∏ —É—á–∞—Å—Ç–Ω–∏–∫–∏**
]

---

# Technologies

### 1. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Node.js

> –û–±–∑–æ—Ä –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã Node.js, –∞ —Ç–∞–∫–∂–µ —Å–∏—Å—Ç–µ–º—ã –º–æ–¥—É–ª–µ–π

### 2. Web Server —Å Express

> –ì–ª—É–±–æ–∫–æ –∏–∑—É—á–∏–º –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ Express. –°–¥–µ–ª–∞–µ–º –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ-–ø–ª–∞—Ç—Ñ–æ—Ä–º—É —Å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º REST API, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π –∏ —Å–µ—Å—Å–∏—è–º–∏. –ë—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å —Å MongoDB

### 3. Node.js –Ω–∞ Prod

> –ù–∞—É—á–∏–º—Å—è –¥–µ–ø–ª–æ–∏—Ç—å Node.js-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Heroku, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –∏ –ª–æ–≥–∏. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –æ—Ç–ª–∞–¥–∫–∏ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ Node.js

### 4. Nest.js, TypeScript, GraphQL, Apollo

> TypeScript-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Nest.js.
–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ Nest.js, —è–∑—ã–∫ GraphQL –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã Apollo.
–°–æ–∑–¥–∞–¥–∏–º CMS-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å GraphQL API –Ω–∞ Nest.js

---

# –¶–µ–ª–∏ –∫—É—Ä—Å–∞

- —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –±—ç–∫–µ–Ω–¥ –Ω–∞ `Node.js` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `Express, Passport, Jest, GraphQL, Nest.js`
- –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –¥–∏–∑–∞–π–Ω–∞ `Node.js`, `V8`
- —Ä–∞–±–æ—Ç–∞—Ç—å —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö `MongoDB` –∏ `PostgreSQL`
- –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è `GraphQl`-—Å–µ—Ä–≤–µ—Ä–∞ —Å `Apollo`
- –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å `CI/CD` –¥–ª—è —Å–≤–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- –Ω–∞–≤—ã–∫–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å `TDD`
- –ø–∏—Å–∞—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–π –∏ —á–∏—Å—Ç—ã–π –∫–æ–¥ –Ω–∞ `TypeScript`
- –æ–ø—ã—Ç —Å–æ–∑–¥–∞–Ω–∏—è `Real-time` –∏ `CLI`-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

---

# –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –∫—É—Ä—Å—É

- –¢–µ–º–∞ Node.js
- 27 + 3 –∑–∞–Ω—è—Ç–∏—è / 1.5 —á–∞—Å–∞ / –≤—Ç–æ—Ä–Ω–∏–∫ / –ø—è—Ç–Ω–∏—Ü–∞
- –í–µ–±–∏–Ω–∞—Ä—ã, –º–∞—Ç–µ—Ä–∏–∞–ª—ã, —Ç–µ–æ—Ä–∏—è –∏ –ø—Ä–∞–∫—Ç–∏–∫–∞
- –î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è
- –í—ã–ø—É—Å–∫–Ω–æ–π –ø—Ä–æ–µ–∫—Ç
- –û–±—â–µ–Ω–∏–µ –≤ slack

---

# –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏+

- **–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ö–æ—Ä–∂–∏–∫–æ–≤**

JavaScript @ Alpari, Comindware, Tinkoff, Backbase, ING  
korzio@gmail.com https://github.com/korzio
  
- **–Æ—Ä–∏–π –î–≤–æ—Ä–∂–µ—Ü–∫–∏–π**

Java, JavaScript @ Luxoft  
Teaching @ 1500+ hours, 600+ developers

---

## –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∫—É—Ä—Å–∞ 
## Q&A

---

# [–ù–µ—Å–∫–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å–æ–≤](https://github.com/denysdovhan/wtfjs)

- `setTimeout` –∏ `setInterval` - —á–∞—Å—Ç—å `JavaScript`?

- ?

```js
console.log.call.call.call.call.call.apply(
  a => a, 
  'what is gonna be printed in the console?'.split(' ')
) 
```

<!-- call(fn, args) -->

- "b" + "a" + +"a" ?

<!-- - typeof document.all? -->

```js
function anc(){
<!-- valid comment too
  return 1
}

anc()
```

---

# –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- Node
  - About
  - –ü—Ä–∏–º–µ—Ä Web —Å–µ—Ä–≤–µ—Ä–∞
.right-image[![Node](assets/node.png)]
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞
  - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–æ–¥—É–ª–∏
  - –ü—Ä–∏–º–µ—Ä—ã Callbacks

![NPM](assets/npm.png)  

- –ü–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä `npm`
  - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ `package.json`
  - CLI

---

# Node

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Å—Ä–µ–¥–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è `JavaScript`, –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ —Å–æ–±—ã—Ç–∏–π–Ω–æ–π –º–æ–¥–µ–ª–∏, –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

#### –ü—Ä–∏–º–µ—Ä web —Å–µ—Ä–≤–µ—Ä–∞

```javascript
const http = require('http') 
const hostname = '127.0.0.1'
const port = 3000
const server = http.createServer((req, res) => {
  res.statusCode = 200 
  res.setHeader('Content-Type', 'text/plain') 
  res.end('Hello World\n')
}) 

server.listen(port, hostname, () => {
  console.log(`Server running at http://${hostname}:${port}/`)
})
```

```bash
node server.js
```

- –ö–∞–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –í—ã –±—ã –æ—Ç–º–µ—Ç–∏–ª–∏ –∏–∑ —ç—Ç–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞?

---

# –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ `JavaScript` —Ñ–∞–π–ª–æ–≤ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–º–∞–Ω–¥—ã node 
  
  - REPL

- `CommonJS` —Ñ–æ—Ä–º–∞—Ç –º–æ–¥—É–ª–µ–π –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
  
  - `ES Modules`

.right-image[
  ![v8](assets/icons/trim/node.png)
]

- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –º–æ–¥—É–ª–µ–π

- API –æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º –ø–∞—Ç—Ç–µ—Ä–Ω–µ Callbacks

- [`ES2015` —Å–∏–Ω—Ç–∞–∫—Å–∏—Å](http://node.green/)

- –î–µ–º–æ (VSCode + [Chrome Debug](chrome://inspect))

.hidden[
  node --inspect-brk simple.js
]

---

# –ò—Å—Ç–æ—Ä–∏—è

.right-image[
  ![v8](assets/icons/trim/v8.png)
]

- *Server side `JavaScript` Platform* - Ryan Dahl, 2009

- Asyncronous (non-blocking) I/O

- Chromium `JavaScript` Engine -> V8

- **Node.js** Foundation

---

# –°—Ç—Ä—É–∫—Ç—É—Ä–∞

- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–∞–ø–∏—Å–∞–Ω–∞ –Ω–∞ `C++` –∏ `JavaScript` 

- `V8` - –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è `JavaScript` –æ—Ç Google (Chromium, Chrome, Opera, Brave, Yandex Browser)

- Event Loop - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Å–æ–±—ã—Ç–∏–π–Ω—ã–π —Ü–∏–∫–ª —Å `libuv`

- –ú–æ–¥—É–ª–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π

.right-image[
  ![node](assets/icons/trim/node.png)
]

### Patterns

- Callback
- Observer
- Module
- Reactor

---

# –ó–∞–¥–∞—á–∞

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å node –∏ npm
https://nodejs.org/en/download/

```bash
node --version
npm --version
```

–°–æ–∑–¥–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å `server.js`

```
echo "console.log(process.argv)" > server.js
```

```bash
node server hello world
```

### –õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [`Node Version Manager (nvm)`](https://github.com/nvm-sh/nvm)

---

# –í–æ–ø—Ä–æ—Å

### –ê –í—ã –∑–Ω–∞–µ—Ç–µ –∫–∞–∫–∏–µ –º–æ–¥—É–ª–∏ –≤–∫–ª—é—á–µ–Ω—ã –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤ `Node`?

<br>

.center[
  ![question](assets/question.png)
]

---

# –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–æ–¥—É–ª–∏

.right-code[
- **Protocols**
  - http(s)
  - net
  - dns
- **System**
  - os
  - v8
  - async_hooks 
  - perf_hooks
  - trace_events
]
- **Main**
  - fs
  - timers
  - streams  
- **Utilities**
  - path
  - util
  - zlib
  - crypto
- **Processes**
  - child_process
  - cluster
  - worker_threads

---

# Utilities

```
const querystring = require('querystring')

querystring.parse(`q=shell+ls+regex&
rlz=1C5CHFA_enNL772ED772&
oq=shell+ls+by+reg&
aqs=chrome.1.63i27j0a4.4221e0b9&
sourceid=chrome&ie=UTF-8
`)

{
  "q": "shell ls regex",
  "rlz": "1C5CHFA_enNL772ED772",
  "oq": "shell ls by reg",
  "aqs": "chrome.1.63i27j0a4.4221e0b9",
  "sourceid": "chrome",
  "ie": "UTF-8"
}
```

- querystring

---

# Utilities

```
const path = require('path')

path.join('/Users', 'alex', 'Sites')
// =>
'/Users/alex/Sites'

path.parse('/home/user/dir/file.txt')

{
  root: '/',
  dir: '/home/user/dir',
  base: 'file.txt',
  ext: '.txt',
  name: 'file'
}
```

- querystring
- path

---

# Utilities

```javascript
const url = require('url')
url.parse('https://github.com/korzio')

// Url 
{
  protocol: 'https:',
  slashes: true,
  auth: null,
  host: 'github.com',
  port: null,
  hostname: 'github.com',
  hash: null,
  search: null,
  query: null,
  pathname: '/korzio',
  path: '/korzio',
  href: 'https://github.com/korzio' 
}
```

- querystring
- path
- url

---

# Utilities

```javascript
const util = require('util')
const assert = require('assert')

util.types.isDate(value)
// or deprecated
util.isDate(value)
// or inherit
util.inherits(MyStream, EventEmitter)

assert.equal(1, 1)
assert.deepEqual({ a: 1 }, { a: 1 })
```

- querystring
- path
- url
- util
- assert

---

# Callbacks

–§—É–Ω–∫—Ü–∏—è, –ø–µ—Ä–µ–¥–∞–Ω–Ω–∞—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –∫–æ–¥—É, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç—å –µ–≥–æ –≤ –∫–∞–∫–æ–π-—Ç–æ –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏. –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å **—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º** –∏–ª–∏ **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º**.

```javascript
const server = http.createServer((req, res) => {
  res.statusCode = 200
  res.setHeader('Content-Type', 'text/plain')
  res.end('Hello World\n')
})

server.listen(port, hostname, () => {
  console.log(`Server running at http://${hostname}:${port}/`)
})
```

–í `Node` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é **callback** –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å "–æ—à–∏–±–∫–æ–π" –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º `–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ`

```
fs.readFile('/etc/passwd', (err, data) => {
  if (err) throw err
  console.log(data)
})
```

---

# –ó–∞–¥–∞—á–∞

–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π –≤–µ–± —Å–µ—Ä–≤–µ—Ä

```js
const http = require('http') 
const server = http.createServer((req, res) => {
  res.statusCode = 200
  res.setHeader('Content-Type', 'text/plain')
  res.end('Hello World\n')
})
```

–ü—Ä–æ—á–∏—Ç–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π `html` —Ñ–∞–π–ª

```js
const fs = require('fs')
fs.readFile('./index.html', (err, text) => {
  console.log(text)
})
```

–û—Ç–¥–∞—Ç—å —Å —Å–µ—Ä–≤–µ—Ä–∞ `html` –∏ –ø–æ–∫–∞–∑–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞

---

# Callback Types

#### –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏

```
fs.access('/etc/passwd', fs.constants.R_OK, (err) => {
  console.log(err ? 'no access!' : 'read')
})
```

#### `Node` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `Promises`

```
util.promisify()
fs.promises.*
```

#### –¢–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è

```
http.request('https://example.com', (error, response, body) => {
  ...
})
``` 

---

# Question

- –ö–∞–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã `callback` –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –≤ `JavaScript` –í—ã –∑–Ω–∞–µ—Ç–µ?
- –í—ã –∑–Ω–∞–∫–æ–º—ã —Å `promisify` —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º?
- –ï—Å—Ç—å –ª–∏ —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É `Promise` –∏ `Callback` –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏?

<br>

.center[
  ![question](assets/question.png)
]


---

# Anti-Pattern - http://callbackhell.com/

```
fs.readdir(source, function (err, files) {
  if (err) {
    console.log('Error finding files: ' + err)
  } else {
    files.forEach(function (filename, fileIndex) {
      console.log(filename)
      gm(source + filename).size(function (err, values) {
        if (err) {
          console.log('Error identifying file size: ' + err)
        } else {
          console.log(filename + ' : ' + values)
          aspect = (values.width / values.height)
          widths.forEach(function (width, widthIndex) {
            height = Math.round(width / aspect)
            console.log('resizing ' + filename + 'to ' + height + 'x' + height)
            this.resize(width, height).write(dest + 'w' + width + '_' + filename, function(err) {
              if (err) console.log('Error writing file: ' + err)
            })
          }.bind(this))
        }
      })
    })
  }
})
```

---

# Globals

.right-image[
  ![node](assets/icons/trim/node.png)
]

- `global` –æ–±—ä–µ–∫—Ç - –∞–Ω–∞–ª–æ–≥ `window`

- –æ–±—ä–µ–∫—Ç—ã `JavaScript`

- *timeouts* –ø–æ—á—Ç–∏ –∫–∞–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

- `console` 

- `process` —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

---

class: white
background-image: url(assets/title.svg)
.top.icon[![otus main](assets/otus-2.png)]

# Node Q&A

---

# NPM

### Package Manager for JavaScript

![NPM](assets/icons/trim/npm.png)

- CI

```bash
npm --version
```

- Registry

```bash
npm i
```

- Website https://npmjs.com/ 

---

# –í —á–∏—Å–ª–∞—Ö


.right-image[
  ![npm downloads](assets/npm_downloads.png)  
]

### –í—Å–µ–≥–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ 1,245,404 –ø–∞–∫–µ—Ç–æ–≤

### –°–∫–∞—á–∏–≤–∞–Ω–∏–π

- –∑–∞ –Ω–µ–¥–µ–ª—é - 19,353,318,186
- –∑–∞ –º–µ—Å—è—Ü - 77,783,269,991
- `react` - 8,189,614
- `djv` - 21,991

### **Node** 2017

25,000,000

.right-code[
  ![NPM](assets/icons/trim/npm.png)
]

### *–ó–≤–µ–∑–¥ –≤–æ –í—Å–µ–ª–µ–Ω–Ω–æ–π*

1,000,000,000,000,000,000,000 

---

# package.json

```
{
  "name": "package",
  "description": "",
  "version": "1.0.0",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/.../package.git"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "bugs": {
    "url": "https://github.com/.../issues"
  },
  "homepage": "https://github.com/.../package"
}
```

---

# Semantic Versioning

- –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è 
https://semver.org/ 

- –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
https://semver.npmjs.com/ 

```bash
npm install semver
```

| Status | Stage | Version |
|:---|:---|:---|
| First release | New product | 1.0.0 |
| Bug fix | patch | 1.0.1 |
| New Feature | minor | 1.1.1 |
| Breaking change | major | 2.0.0 |

***

- –ö–∞–∫–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –Ω–æ—Ç–∞—Ü–∏–∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –í—ã –∑–Ω–∞–µ—Ç–µ?

---

# CLI

.right-code[![NPM](assets/npm.png)]

- –û—Å–Ω–æ–≤–Ω—ã–µ
  - init
  - install
  - start 
  - test
  - run
  
  
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ
  - ci 
  - npx 

---

# –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞

–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π `npm` –ø–∞–∫–µ—Ç

```bash
mkdir ... && cd ... 
npm init # read & answer
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å

```bash
npm install --save-dev ... 
# copy & paste package.json > chat
```

–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç—ã

```bash
echo "" > server.js # create file
npm start
npm test # npm run test
```

---

# –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

.right-code[
```
  "dependencies": {
    "commander": "^2.7.1",
    "lodash.get": "^4.0.0",
    "lodash.isequal": "^4.0.0",
    "validator": "^9.0.0"
  },
  "devDependencies": {
    "coveralls": "^3.0.0",
    "grunt": "^1.0.1",
    "grunt-browserify": "^5.2.0",
    "grunt-cli": "^1.2.0",
    "grunt-contrib-copy": "^1.0.0",
    "grunt-jscs": "^3.0.1",
    "grunt-lineending": "^1.0.0",
    "jasmine-node": "^1.14.5",
    "jasmine-reporters": "^2.2.1",
    "remapify": "^2.1.0"
  }
```
]

- `dependencies`
  - `devDependencies` —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
  
- `--global`
- `node_modules`

.hidden[
  Another great way to speed up installation time is to include all production dependencies in the published module. We can tell npm to bundle them with our module by adding them as bundleDependencies to our package.json:
  "bundleDependencies": [
    "config-chain",
    "nopt",
    "npmlog",
    "opener",
    "osenv",
    "request"
  ],
  Bundling the dependencies reduces the installation time a lot, as we omit all the small HTTP requests for each dependency and their dependencies during installation. With the current npm, installation time is reduced from 20 seconds to 5 seconds for a broadband connection. Bundling the dependencies also makes sure that our package is still installable even if a module was unpublished.
  When we now run npm publish, we will publish a highly optimized version of our package.
  
  https://learning.oreilly.com/library/view/the-cli-book/9781484231777/A456043_1_En_3_Chapter.html
]

---

class: white
background-image: url(assets/title.svg)
.top.icon[![otus main](assets/otus-2.png)]

# NPM Q&A

---

# Docs

### Node core concepts

- https://nodejs.org/api/

- https://nodejs.org/en/docs/guides/ 

### package manager for javascript

![NPM](assets/npm.png)

- https://docs.npmjs.com/

---

# –ù–∞ –∑–∞–Ω—è—Ç–∏–∏

- –ü–æ–∑–Ω–∞–∫–æ–º–∏–ª–∏—Å—å —Å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–º –∏ —Å –ø—Ä–æ–≥—Ä–∞–º–º–æ–π –∫—É—Ä—Å–∞
- –ó–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ `Node.js`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `NPM` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤

---

# –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–±–æ—Ç—ã

- https://github.com/
- single repo lastname-name(-otus) - `korzhikov-alex-otus`
- `master` branch
- MR from `block-lesson-number` to `master` (`javascript-1` -> `master`, `react-4` -> `master`)
- exclude `node_modules`, `bower_components`, `editor`, scaffolding
- https://github.com/korzio/modern_javascript_frameworks
- –î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ MR –≤ —á–∞—Ç —Å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–º –≤–Ω—É—Ç—Ä–∏ –õ–ö –û—Ç—É—Å–∞

---

# –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞

> **–°–æ–∑–¥–∞–Ω–∏–µ NPM –ø–∞–∫–µ—Ç–∞ –¥–ª—è –ø–æ–∫–∞–∑–∞ –¥–µ—Ä–µ–≤–∞**  
> –ù–∞–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–∫–∞–∑–∞ –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã  

```json
{
  "name": 1,
  "items": [{
    "name": 2,
    "items": [{ "name": 3 }, { "name": 4 }]
  }, {
    "name": 5,
    "items": [{ "name": 6 }]
  }]
}
```

> –ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã

```bash
npm start
1
‚îú‚îÄ‚îÄ 2
‚îÇ   ‚îî‚îÄ‚îÄ 3
‚îÇ   ‚îî‚îÄ‚îÄ 4
‚îî‚îÄ‚îÄ 5
    ‚îî‚îÄ‚îÄ 6
```

---

background-image: url(assets/title.svg)
# –°–ø–∞—Å–∏–±–æ –∑–∞ –≤–Ω–∏–º–∞–Ω–∏–µ!
## –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–π–¥–∏—Ç–µ [**–æ–ø—Ä–æ—Å**](https://otus.ru/polls/9701/)
## –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ

- –í—Å–µ –ª–∏ —Ç–µ–º—ã –±—ã–ª–∏ –ø–æ–Ω—è—Ç–Ω—ã? (–¥–∞ - –Ω–µ—Ç)
- –õ–µ–≥–∫–∏–π –º–∞—Ç–µ—Ä–∏–∞–ª –∏–ª–∏ –Ω–µ—Ç? (1 –ø—Ä–æ—Å—Ç–æ - 10 —Å–ª–æ–∂–Ω–æ)

---

# TODO

From –í–ª–∞–¥–∏–º–∏—Ä –ß–∞–≥–∏–Ω to Me: (Privately) (07:17 PM)
> –ø–æ–¥—Å–∫–∞–∂–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –∞ –∫–∞–∫ –ø–æ–ø–∞—Å—Ç—å –≤ —Å–ª–∞–∫ –ø–æ node.js?